I"÷<h2 id="springæ¡†æ¶è¯¦è§£">Springæ¡†æ¶è¯¦è§£</h2>

<h4 id="30-é«˜çº§è£…é…">3.0 é«˜çº§è£…é…</h4>

<h4 id="31-profileæ³¨è§£">3.1 @Profileæ³¨è§£</h4>
<ul>
  <li>Spring3.1åªæ”¯æŒåœ¨ç±»çº§åˆ«ä¸Šæ·»åŠ @Profileæ³¨è§£ï¼ŒSpring3.2æ”¯æŒåœ¨æ–¹æ³•ä¸Šæ·»åŠ @Profile</li>
  <li>
    <xml>é…ç½®æ–‡ä»¶å†…å¯ä»¥é€šè¿‡<beans profile="dev">æŒ‡å®š
æ¿€æ´»Profileçš„æ–¹å¼ï¼š
</beans></xml>
    <ul>
      <li>ä½œä¸ºDispatcherServletåˆå§‹åŒ–å‚æ•°</li>
      <li>ä½œä¸ºWebåº”ç”¨çš„ä¸Šä¸‹æ–‡å‚æ•°</li>
      <li>ä½œä¸ºJNDIæ¡ç›®</li>
      <li>ä½œä¸ºç¯å¢ƒå˜é‡</li>
      <li>ä½œä¸ºJVMçš„ç³»ç»Ÿå±æ€§</li>
      <li>åœ¨é›†æˆæµ‹è¯•ä¸Šï¼Œä½¿ç”¨@ActiveProfilesæ³¨è§£è®¾ç½®
æŸ¥æ‰¾ç­–ç•¥ï¼Œspring.profile.active &gt; spring.profile.defaule,å¦‚æœéƒ½æ²¡è®¾ç½®ï¼Œåˆ™åŠ è½½æœªè®¾ç½®profileçš„é…ç½®</li>
    </ul>
  </li>
</ul>

<h4 id="32-conditionalxxxclass">3.2 @Conditional(xxx.class)</h4>
<p>xxxç±»å®ç°äº†Conditionæ¥å£ï¼Œé‡å†™äº†matchesæ–¹æ³•ï¼Œè¿”å›true/false æ¥å†³å®šbeançš„åˆ›å»ºæ¡ä»¶</p>

<h4 id="33-è§£å†³æ­§ä¹‰æ€§çš„æ³¨è§£">3.3 è§£å†³æ­§ä¹‰æ€§çš„æ³¨è§£</h4>
<p>@Primary å’Œ @Qualifier(â€œaaaâ€)
å¯¹äºå¤šæ€æ³¨å…¥é—®é¢˜ï¼ŒåŒä¸€ä¸ªå¼•ç”¨å¯¹åº”å¤šä¸ªbeançš„æƒ…å†µï¼Œä½¿ç”¨ä¸Šè¿°æ³¨è§£å¯ä»¥è§£å†³</p>

<h4 id="34-beançš„ä½œç”¨åŸŸ">3.4 beançš„ä½œç”¨åŸŸ</h4>
<p>singletonå•ä¾‹ï¼šæ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªbeançš„å®ä¾‹
prototypeï¼šæ¯æ¬¡æ³¨å…¥æˆ–è€…é€šè¿‡ä¸Šä¸‹æ–‡è·å–ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeançš„å®ä¾‹
sessionï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œæ¯ä¸ªä¼šè¯ä¸€ä¸ªbeanå®ä¾‹
requestï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚ä¸€ä¸ªbeanå®ä¾‹</p>

<p>@Scopeï¼šç”¨äºæŒ‡å®šbeançš„ä½œç”¨åŸŸ
value:ä½œç”¨åŸŸç±»å‹
proxyMode:</p>

<ul>
  <li>
    <h4 id="ä½œç”¨åŸŸä»£ç†æ–¹å¼è¿›è¡Œæ³¨å…¥">ä½œç”¨åŸŸä»£ç†æ–¹å¼è¿›è¡Œæ³¨å…¥</h4>
    <p>å½“ä¸€ä¸ªå•ä¾‹ä¾èµ–çš„å¯¹è±¡æ˜¯requestæˆ–è€…sessionçš„beanï¼Œåœ¨å•ä¾‹beanåœ¨ç±»åº”ç”¨ä¸Šä¸‹æ–‡åŠ è½½çš„æ—¶å€™åˆ›å»ºï¼Œè€Œrequestæˆ–sessionçš„å¯¹è±¡å½“æ—¶å¹¶ä¸å­˜åœ¨ï¼Œ
è€Œæ˜¯ç­‰åˆ°æŸä¸ªç”¨æˆ·è¿›å…¥ç³»ç»Ÿï¼Œåˆ›å»ºäº†ä¼šè¯ä¹‹åæ‰åˆ›å»ºå®ä¾‹ï¼Œè¿™æ˜¯ä¾¿éœ€è¦ä½œç”¨åŸŸä»£ç†æ–¹å¼è¿›è¡Œæ³¨å…¥
å¦‚æœå¯¹è±¡æ˜¯æ¥å£ï¼Œåˆ™æŒ‡å®šproxyMode=ScopedProxyMode.INTERFACES,å¦‚æœå¯¹è±¡æ˜¯ç±»ï¼Œåˆ™æŒ‡å®šproxyMode=ScopedProxyMode.TARGET_CLASS</p>
  </li>
</ul>

<h3 id="35-è¿è¡Œæ—¶å€¼æ³¨å…¥">3.5 è¿è¡Œæ—¶å€¼æ³¨å…¥</h3>
<ul>
  <li>åŠ è½½æ–‡ä»¶ï¼š@PropertySource(â€œclasspath:/xxx/yyy/app.propertiesâ€)
    <ul>
      <li>aaa = 123</li>
      <li>bbb.ccc = abc
æ–‡ä»¶ä¸­çš„å†…å®¹å°†ä¼šåŠ è½½åˆ°Environmentå¯¹è±¡ä¸­</li>
    </ul>
  </li>
  <li>@AutoWired
Environment env</li>
  <li>env.getProperty(â€œaaaâ€) =&gt; 123</li>
  <li>env.getProperty(â€œbbb.cccâ€) =&gt; abc</li>
</ul>

<p>Environmentæ–¹æ³•ï¼š</p>
<ul>
  <li>getProperty(String key)</li>
  <li>getProperty(String key, String defaultValue)</li>
  <li>T getProperty(String key, Class<T> type)</T></li>
  <li>T getProperty(String key, Class<T> type, T defaultValue)</T></li>
</ul>

<p>ä½¿ç”¨@Value</p>
<ul>
  <li>é…ç½®PropertySourcesPlaceholderConfigurerç”¨äºè§£æå ä½ç¬¦
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">PropertySourcesPlaceholderConfigurer</span> <span class="nf">placeholderConfigurer</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">PropertySourcesPlaceholderConfigurer</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>@Value(â€œ${aaa.bbb}â€)
String str;</li>
</ul>

<p>SpEL
#{}</p>

:ET